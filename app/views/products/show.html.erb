<br>
<%= @review.errors.full_messages.join(",") %>
<br>
<div>
  <h1><%= @p.title %></h1>
  <%= @p.description %>
  <%= @p.price %>
  <%= @p.category.name %>
  <%= link_to "Delete", product_path(@p), method: :delete %>
  <%= link_to "Edit", edit_product_path(@p) %>

  <%= @p.favourites.count %> favours
  <% if user_sign_in? && can?(:favour, @p, current_user) %>
      <% if @p.favour_by?(current_user) %>


          <%= link_to "unFavourite", favourite_path(@p), method: :delete %>
      <% else %>
          <%= link_to "Favourite", product_favourites_path(@p), method: :post %>

      <% end %>
  <% end %>



  <br>

  <section class="tag-widge">
    <h1>Tagging</h1>
    <% tag_arr=@p.tags.map { |tag| tag.name } %>
    <%= tag_arr.join(" , ") %>
  </section>


</div>


<h2>Reviews</h2>


<div id="review-form">
  <%= render 'reviews/form' %>

</div>


<div id="reviews">
  <% @p.reviews.each do |review| %>

      <%= render 'reviews/review', review: review %>

  <% end %>


</div>


